(window["canvasWebpackJsonp"]=window["canvasWebpackJsonp"]||[]).push([[157],{EwH5:function(e,t,r){"use strict"
var s=r("ko/W")
t["a"]=function(e){e&&s["a"].unregisterAllTrackers()
s["a"].isRunning()||s["a"].start()
if(s["a"].isDirty())return s["a"].deliver()}},JOjB:function(e,t,r){"use strict"
var s=r("ouhR")
var i=r.n(s)
var o=r("HGxv")
var n=r("8WeW")
Object(n["a"])(JSON.parse('{"ar":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"إظهار النص المقتبس","word_separator":" "}}},"ca":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"mostra el text citat","word_separator":" "}}},"cy":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"dangos testun wedi’i ddyfynnu","word_separator":" "}}},"da":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"vis tekst i gåseøjne","word_separator":" "}}},"da-x-k12":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"vis tekst i gåseøjne","word_separator":" "}}},"de":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"zitierten Text zeigen","word_separator":" "}}},"el":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"προβολή κειμένου που παρατίθεται"}}},"en-AU":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"en-AU-x-unimelb":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"en-CA":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"en-GB":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"en-GB-x-lbs":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"en-GB-x-ukhe":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"show quoted text","word_separator":" "}}},"es":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"mostrar texto citado","word_separator":" "}}},"fa":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"نمایش متن نقل شده","word_separator":" "}}},"fi":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"näytä lainattu teksti","word_separator":" "}}},"fr":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"afficher le texte entre guillemets","word_separator":" "}}},"fr-CA":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"afficher le texte entre guillemets","word_separator":" "}}},"he":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"מציג ציטוט","word_separator":" "}}},"ht":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"afiche tèks site","word_separator":" "}}},"hu":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"idézett szöveg megjelenítése","word_separator":" "}}},"hy":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"ցույց տալ մեջբերվող տեքստը","word_separator":"-"}}},"is":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"Sýna ívitnaðan texta","word_separator":" "}}},"it":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"mostra testo citato","word_separator":" "}}},"ja":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"引用したテキストを表示","word_separator":" "}}},"ko":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"인용된 텍스트 표시","word_separator":" "}}},"mi":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"whakaatu kuputuhi faahiti","word_separator":"-"}}},"nb":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"vis den merkede teksten","word_separator":" "}}},"nb-x-k12":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"vis den merkede teksten","word_separator":" "}}},"nl":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"geciteerde tekst tonen","word_separator":" "}}},"nn":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"vis sitert tekst","word_separator":" "}}},"pl":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"pokaż cytowany fragment tekstu","word_separator":" "}}},"pt":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"exibir texto citado","word_separator":" "}}},"pt-BR":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"exibir texto citado","word_separator":" "}}},"ru":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"показать цитированный текст","word_separator":" "}}},"sl":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"prikaži citirano besedilo","word_separator":" "}}},"sv":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"visa citerad text","word_separator":" "}}},"sv-x-k12":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"visa citerad text","word_separator":" "}}},"tr":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"alıntılanan metni göster","word_separator":" "}}},"uk":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"Показати цитований текст","word_separator":" "}}},"zh-Hans":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"显示引用的文本","word_separator":" "}}},"zh-Hant":{"lib":{"text_helper":{"ellipsis":"...","quoted_text_toggle":"顯示引用的文字","word_separator":" "}}}}'))
r("jQeR")
r("0sPK")
var l=o["default"].scoped("lib.text_helper")
var a=r("gI0r")
var _,u,p
_="LINK-PLACEHOLDER"
u=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))|(LINK-PLACEHOLDER)/gi
t["a"]=p={quoteClump:function(e){return"<div class='quoted_text_holder'> <a href='#' class='show_quoted_text_link'>"+Object(a["a"])(l.t("quoted_text_toggle","show quoted text"))+"</a> <div class='quoted_text' style='display: none;'> "+i.a.raw(e.join("\n"))+" </div> </div>"},formatMessage:function(e){var t,r,s,i,o,n,l,d
i=[]
o=[]
e=e.replace(u,(function(e,t){var r
o.push(e===_?_:(r=e,"http://"===r.slice(0,7)||"https://"===r.slice(0,8)||(r="http://"+r),i.push(r),"<a href='"+Object(a["a"])(r)+"'>"+Object(a["a"])(e)+"</a>"))
return _}))
e=Object(a["a"])(e)
e=e.replace(new RegExp(_,"g"),(function(e,t){return o.shift()}))
e=e.replace(/\n/g,"<br />\n")
n=[]
l=[]
d=e.split("\n")
for(t=0,r=d.length;t<r;t++){s=d[t]
if(s.match(/^(&gt;|>)/))l.push(s)
else{l.length&&n.push(p.quoteClump(l))
l=[]
n.push(s)}}l.length&&n.push(p.quoteClump(l))
return n.join("\n")},delimit:function(e){var t,r,s,i,o
if(isNaN(e))return String(e)
o=e<0?"-":""
t=Math.abs(e)
if(Infinity===t)return String(e)
r=Math.floor(t)
i=t===r?"":String(t).replace(/^\d+\./,".")
while(r>=1e3){s=String(r).replace(/\d+(\d\d\d)$/,",$1")
r=Math.floor(r/1e3)
i=s+i}return o+String(r)+i},truncateText:function(e,t){var r,s,i,o,n,a
null==t&&(t={})
s=null!=(o=t.max)?o:30
r=l.t("ellipsis","...")
a=l.t("word_separator"," ")
e=(null!=e?e:"").replace(/\s+/g,a).trim()
if(!e||e.length<=s)return e
n=0
while(true){i=e.indexOf(a,n+1)
if(i<0||i>s-r.length)break
n=i}n||(n=s-r.length)
return e.substring(0,n)+r},plainText:function(e){return e.replace(/(<([^>]+)>)/gi,"")}}},L0Ie:function(e,t){if((""+location.search).match(/[?&]debug_js=1/))e.exports=console
else{function r(){}e.exports=["debug","info","log","warn","error"].reduce((e,t)=>{e[t]=r
return e},{})}},dbrX:function(e,t,r){"use strict"
var s=r("uYtQ")
const i={}
const o={getCssVariant(){const e=window.ENV.use_responsive_layout?"responsive_layout":"new_styles"
const t=window.ENV.use_high_contrast?"high_contrast":"normal_contrast"
const r=Object(s["c"])()?"_rtl":""
return`${e}_${t}${r}`},urlFor(e,{combinedChecksum:t,includesNoVariables:r}){const s=r?"no_variables":o.getCssVariant()
return[window.ENV.ASSET_HOST||"","dist","brandable_css",s,`${e}-${t}.css`].join("/")},loadStylesheet(e,t){if(e in i)return
const r=document.createElement("link")
r.rel="stylesheet"
r.href=o.urlFor(e,t)
r.setAttribute("data-loaded-by-brandableCss",true)
document.head.appendChild(r)}}
t["a"]=o},hLjT:function(e,t){e.exports=e=>e.id.replace(/^question_/,"")},hpsT:function(e,t,r){"use strict"
r.d(t,"a",(function(){return s}))
function s(e,t){for(let r=0;r<e.length;r++){const s=e[r]
if(s===t){e.splice(r,1)
break}}return e}},"ko/W":function(e,t,r){"use strict"
var s={EVT_PAGE_FOCUSED:"page_focused",EVT_PAGE_BLURRED:"page_blurred",EVT_QUESTION_VIEWED:"question_viewed",EVT_QUESTION_FLAGGED:"question_flagged",EVT_SESSION_STARTED:"session_started",EVT_PRIORITY_LOW:0,EVT_PRIORITY_HIGH:100,EVT_STATE_PENDING_DELIVERY:"pending_delivery",EVT_STATE_IN_DELIVERY:"in_delivery",EVT_STATE_DELIVERED:"delivered",EVT_STORAGE_KEY:"qla_events",EVT_STORAGE_MEMORY:"memory",EVT_STORAGE_LOCAL_STORAGE:"localStorage"}
var i=r("Y/W1")
function o(){let e=Date.now()
return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(e+16*Math.random())%16|0
e=Math.floor(e/16)
const s="x"===t?r:7&r|8
return s.toString(16)})}class n{static fromJSON(e){const t=new n(e.event_type,e.event_data)
t.recordedAt=new Date(e.client_timestamp)
return t}constructor(e,t){if(!e)throw new Error("An event type must be specified.")
this._id=o()
this._state=s.EVT_STATE_PENDING_DELIVERY
this.type=e
this.data=Object(i["clone"])(t)
this.recordedAt=new Date}isPendingDelivery(){return this._state===s.EVT_STATE_PENDING_DELIVERY}isBeingDelivered(){return this._state===s.EVT_STATE_IN_DELIVERY}wasDelivered(){return this._state===s.EVT_STATE_DELIVERED}toJSON(){return{event_type:this.type,event_data:this.data,client_timestamp:this.recordedAt}}toString(){return JSON.stringify(this.toJSON())}}class l{constructor(e){this._events=e}isEmpty(){return 0===this._events.length}markPendingDelivery(){return this._events.forEach(e=>e._state=s.EVT_STATE_PENDING_DELIVERY)}markBeingDelivered(){return this._events.forEach(e=>e._state=s.EVT_STATE_IN_DELIVERY)}toJSON(){return this._events.map(e=>e.toJSON())}}var a=r("L0Ie")
var _=r.n(a)
const u=[s.EVT_STORAGE_MEMORY,s.EVT_STORAGE_LOCAL_STORAGE]
class p{static setStorageAdapter(e){if(-1===u.indexOf(e))throw new Error(`Unsupported storage adapter "${e}". Available adapters are:\n${u.join(", ")}`)
return p.STORAGE_ADAPTER=e}constructor(){this.useLocalStorage=p.STORAGE_ADAPTER===s.EVT_STORAGE_LOCAL_STORAGE
this._events=this._load()||[]
_.a.debug("EventBuffer: using",this.constructor.STORAGE_ADAPTER,"for storage")}push(e){this._events.push(e)
return this._save()}isEmpty(){return 0===this._events.length}getLength(){return this._events.length}filter(e){return new l(this._events.filter(e))}discard(e){const t=e._events.map(e=>e._id)
this._events=this._events.filter(e=>-1===t.indexOf(e._id))
this._save()
return}toJSON(){return this._events.map(e=>e.toJSON())}_save(){if(this.useLocalStorage)try{localStorage.setItem(s.EVT_STORAGE_KEY,JSON.stringify(this.toJSON()))}catch(e){_.a.warn("Unable to save to localStorage, likely because we're out of space.")}return}_load(){if(this.useLocalStorage){const e=JSON.parse(localStorage.getItem(s.EVT_STORAGE_KEY)||"[]")
return e.map(e=>n.fromJSON(e))}return}}p.STORAGE_ADAPTER=s.EVT_STORAGE_MEMORY
var d=r("ouhR")
var h=r.n(d)
var c=r("hpsT")
const g={Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}
class x{constructor(e={}){this.options=Object(i["extend"])({},x.options,e)
this._trackerFactories=[]
this._state={trackers:[],buffer:null,deliveryAgent:null,deliveries:[],lastEventType:null}}registerTracker(e){return this._trackerFactories.push(e)}unregisterAllTrackers(){return this._trackerFactories=[]}start(){const e=this._state
e.buffer=new p
const t=this.options
const r=this._enqueue.bind(this)
function s(e,t){const s=new n(e.getEventType(),t)
return r(s,e.getDeliveryPriority())}e.trackers=this._trackerFactories.map(e=>{const t=new e
t.install(s.bind(null,t))
return t})
if(t.autoDeliver)return this._startDeliveryAgent()}isRunning(){return!!this._state.buffer}isDirty(){return this.isRunning()&&!this._state.buffer.isEmpty()}isDelivering(){return this._state.deliveries.length>0}deliver(){const e=this._state.buffer
const t=this._state.deliveries
const r=this.options
const s=e.filter(e=>e.isPendingDelivery())
if(s.isEmpty())return Object(d["when"])()
s.markBeingDelivered()
const i=Object(d["ajax"])({url:r.deliveryUrl,type:"POST",global:false,headers:g,data:JSON.stringify({quiz_submission_events:s.toJSON()}),error:r.errorHandler})
i.then(()=>e.discard(s),()=>s.markPendingDelivery())
const o=()=>Object(c["a"])(t,i)
i.then(o,o)
t.push(i)
return i}stop(e=false){const t=this._state
if(this.isDelivering()&&!e){console.warn("You are attempting to stop the QuizLogAuditing module while a delivery is in progress.")
return Object(d["when"])(t.deliveries).done(this.stop.bind(this,true))}t.buffer=null
t.deliveryAgent&&this._stopDeliveryAgent()
t.trackers.forEach(e=>e.uninstall())
t.trackers=[]
return Object(d["when"])()}_startDeliveryAgent(){return this._state.deliveryAgent=setInterval(this.deliver.bind(this),this.options.autoDeliveryFrequency)}_enqueue(e,t){if(e.type===s.EVT_PAGE_FOCUSED&&this._state.lastEventType!==s.EVT_PAGE_BLURRED)return false
this._state.buffer.push(e)
this._state.lastEventType=e.type
_.a.log(`Enqueuing ${e} for delivery.`)
if(t===s.EVT_PRIORITY_HIGH)return this.isDelivering()?Object(d["when"])(this._state.deliveries).done(this.deliver.bind(this)):this.deliver()}_stopDeliveryAgent(){return this._state.deliveryAgent=clearInterval(this._state.deliveryAgent)}}x.options={autoDeliver:true,autoDeliveryFrequency:15e3,deliveryUrl:"/quiz_submission_events"}
class E{constructor(e={}){this.eventType||(this.eventType=null)
this.priority||(this.priority=s.EVT_PRIORITY_LOW)
this._options=Object(i["extend"])({},this.options,e)
this.uid=`${this.eventType}_${Object(i["uniqueId"])()}`}install(e){throw new Error("Not implemented!")}getEventType(){return this.eventType}getDeliveryPriority(){return this.priority}getOption(e){return this._options[e]}uninstall(){if(this._bindings){this._bindings.forEach(e=>h()(e.selector).off(e.eventName))
return this._bindings=null}}bind(e,t,r,s={}){this._bindings||(this._bindings=[])
this._bindings.push({selector:e,eventName:t})
const o=parseInt(s.throttle||0,10)
o>0&&(r=Object(i["throttle"])(r,o,{leading:true,trailing:false}))
h()(e).on(`${t}.${this.eventType}`,r)}}class v extends E{install(e){return this.bind(window,"focus",()=>e(),{throttle:this.getOption("frequency")})}}v.prototype.eventType=s.EVT_PAGE_FOCUSED
v.prototype.options={frequency:5e3}
class f extends E{install(e){return this.bind(window,"blur",()=>{setTimeout(()=>{"IFRAME"!==document.activeElement.tagName&&e()})},{throttle:this.getOption("frequency")})}}f.prototype.eventType=s.EVT_PAGE_BLURRED
f.prototype.options={frequency:5e3}
const b=h()(window)
function T(e){const t=h()(e)
const r=b.scrollTop()
const s=r+b.height()
const i=t.offset().top
const o=i+t.height()
return r<i&&s>o}h.a.extend(h.a.expr[":"],{in_viewport:T})
var w=r("hLjT")
var y=r.n(w)
class O extends E{install(e,t=window){let r=[]
return this.bind(t,"scroll",()=>{const t=this.identifyVisibleQuestions().filter(e=>-1===r.indexOf(e))
if(t.length>0){r=r.concat(t)
_.a.log(`Student has just viewed the following questions: ${t}. (Questions viewed up until now are: ${r})`)
return e(t)}},{throttle:this.getOption("frequency")})}identifyVisibleQuestions(){return h()(".question[id]:visible").filter(":in_viewport").toArray().map(y.a)}}O.prototype.eventType=s.EVT_QUESTION_VIEWED
O.prototype.options={frequency:2500}
class S extends E{install(e){h()(document.body).on("click."+this.uid,this.getOption("buttonSelector"),t=>{const r=h()(t.target).closest(this.getOption("questionSelector"))
const s=r.hasClass(this.getOption("questionMarkedClass"))
const i=y()(r[0])
_.a.log(`Question ${i} ${s?"is now flagged":"is no longer flagged"}.`)
return e({flagged:s,questionId:i})})}}S.prototype.eventType=s.EVT_QUESTION_FLAGGED
S.prototype.options={buttonSelector:".flag_question",questionSelector:".question",questionMarkedClass:"marked"}
class q extends E{install(e){const t=navigator,r=t.userAgent
_.a.log(`I've been loaded by ${r}.`)
if(-1===location.href.indexOf("question")&&location.href.indexOf("take")>0)return e({user_agent:r})}}q.prototype.eventType=s.EVT_SESSION_STARTED
q.prototype.options={}
const A=[v,f,O,S,q]
const m=new x
A.forEach(e=>m.registerTracker(e))
_.a.debug("QuizLogAuditing: will be using localStorage.")
p.setStorageAdapter(s.EVT_STORAGE_LOCAL_STORAGE)
m.options.deliveryUrl=ENV.QUIZ_SUBMISSION_EVENTS_URL
m.options.errorHandler=function(e){console.log(e)
401!==e.status&&"Unauthorized"!==e.statusText||window.location.reload()}
t["a"]=m}}])

//# sourceMappingURL=157-c-a128b4814f.js.map